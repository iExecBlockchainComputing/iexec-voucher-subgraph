name: Build and Push Subgraph Deployer Docker Image

on:
  push:
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+'
      - 'v[0-9]+.[0-9]+.[0-9]+-rc.[0-9]+'
  workflow_dispatch:
 
jobs:
  build-and-push:
    uses: iExecBlockchainComputing/github-actions-workflows/tree/main/workflows/build-docker/main.yml@0.1.1
    with:
      dockerfile: Dockerfile
      image-name: iexecdev/subgraph-deployer
      dockerhub-username: ${{ secrets.DOCKERHUB_USERNAME }}
      dockerhub-pat: ${{ secrets.DOCKERHUB_PAT }}
